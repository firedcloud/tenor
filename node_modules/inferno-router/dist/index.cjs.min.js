"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("inferno"),e=require("history"),o=require("path-to-regexp-es6"),r=require("hoist-non-inferno-statics");function n(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var i=n(o),a=n(r),c=Array.isArray;function p(t){return null===t||!1===t||!0===t||void 0===t}function s(t){return"string"===typeof t}function u(t,e){var o={};if(t)for(var r in t)o[r]=t[r];if(e)for(var n in e)o[n]=e[n];return o}function h(t){var e=t.pathname;void 0===e&&(e="/");var o=t.search;void 0===o&&(o="");var r=t.hash;return void 0===r&&(r=""),e+o+r}function l(t,e,o,r,n,i,a,c){if(!t){var p;if(void 0===e)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[o,r,n,i,a,c],u=0;(p=new Error(e.replace(/%s/g,(function(){return s[u++]})))).name="Invariant Violation"}throw p.framesToPop=1,p}}var f=function(t){function e(e,o){t.call(this,e,o),this.state={match:this.computeMatch(e.history.location.pathname)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){var t,e=u(this.context.router,null);return e.history=this.props.history,e.route={location:e.history.location,match:null===(t=this.state)||void 0===t?void 0:t.match},{router:e}},e.prototype.computeMatch=function(t){return{isExact:"/"===t,params:{},path:"/",url:"/"}},e.prototype.componentWillMount=function(){var t=this,e=this.props.history;this.unlisten=e.listen((function(){t.setState({match:t.computeMatch(e.location.pathname)})}))},e.prototype.componentWillUnmount=function(){this.unlisten()},e.prototype.render=function(t){return t.children},e}(t.Component);function y(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(o[r]=t[r]);return o}function d(t){return"/"===t.charAt(0)?t:"/"+t}var m=function(){},v=function(o){function r(){var t=this;o.apply(this,arguments),this.createHref=function(e){return d((t.props.basename||"")+g(e))},this.handlePush=function(o){var r=t.props,n=r.basename,i=r.context;i.action="PUSH",i.location=C(n,s(o)?e.parsePath(o):o),i.url=g(i.location)},this.handleReplace=function(o){var r=t.props,n=r.basename,i=r.context;i.action="REPLACE",i.location=C(n,s(o)?e.parsePath(o):o),i.url=g(i.location)},this.handleListen=function(){return m},this.handleBlock=function(){return m}}return o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r,r.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},r.prototype.render=function(e){var o=e.basename;e.context;var r=e.location,n=y(e,["basename","context","location"]);return t.createComponentVNode(4,f,u(n,{history:{action:"POP",block:this.handleBlock,createHref:this.createHref,go:k("go"),goBack:k("goBack"),goForward:k("goForward"),listen:this.handleListen,location:_(o,b(r)),push:this.handlePush,replace:this.handleReplace}}))},r}(t.Component);function x(t){var e=t.pathname;void 0===e&&(e="/");var o=t.search,r=t.hash;return{hash:"#"===(r||"")?"":r,pathname:e,search:"?"===(o||"")?"":o}}function C(t,e){if(!t)return e;return u(e,{pathname:d(t)+e.pathname})}function _(t,e){if(!t)return e;var o=d(t);if(0!==e.pathname.indexOf(o))return e;return u(e,{pathname:e.pathname.substr(o.length)})}function b(t){return"string"===typeof t?e.parsePath(t):x(t)}function g(t){return"string"===typeof t?t:h(t)}function k(t){return function(){l(!1,"You cannot %s with <StaticRouter>",t)}}v.defaultProps={basename:"",location:"/"};var O=function(o){function r(t,r){o.call(this,t,r),this.history=e.createBrowserHistory(t)}return o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r,r.prototype.render=function(){return t.createComponentVNode(4,f,{children:this.props.children,history:this.history})},r}(t.Component),P=function(o){function r(t,r){o.call(this,t,r),this.history=e.createHashHistory()}return o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r,r.prototype.render=function(){return t.createComponentVNode(4,f,{children:this.props.children,history:this.history})},r}(t.Component),R=function(o){function r(t,r){o.call(this,t,r),this.history=e.createMemoryHistory(t)}return o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r,r.prototype.render=function(){return t.createComponentVNode(4,f,{children:this.props.children,history:this.history})},r}(t.Component),w={},N=1e4,j=0,M=function(t,e){var o=""+e.end+e.strict+e.sensitive,r=w[o]||(w[o]={});if(r[t])return r[t];var n=[],a={re:i.default(t,n,e),keys:n};return j<N&&(r[t]=a,j++),a};function V(t,e){"string"===typeof e&&(e={path:e});var o=e.path;void 0===o&&(o="/");var r=e.exact;void 0===r&&(r=!1);var n=e.strict;void 0===n&&(n=!1);var i=e.sensitive;void 0===i&&(i=!1);var a=M(o,{end:r,strict:n,sensitive:i}),c=a.re,p=a.keys,s=c.exec(t);if(!s)return null;var u=s[0],h=s.slice(1),l=t===u;if(r&&!l)return null;return{isExact:l,params:p.reduce((function(t,e,o){return t[e.name]=h[o],t}),{}),path:o,url:"/"===o&&""===u?"/":u}}var S=function(e){function o(t,o){e.call(this,t,o),this.state={match:this.computeMatch(t,o.router)}}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.getChildContext=function(){var t=u(this.context.router,null);return t.route={location:this.props.location||this.context.router.route.location,match:this.state.match},{router:t}},o.prototype.computeMatch=function(t,e){var o=t.computedMatch,r=t.location,n=t.path,i=t.strict,a=t.exact,c=t.sensitive;if(o)return o;var p=e.route,s=(r||p.location).pathname;return n?V(s,{path:n,strict:i,exact:a,sensitive:c}):p.match},o.prototype.componentWillReceiveProps=function(t,e){this.setState({match:this.computeMatch(t,e.router)})},o.prototype.render=function(){var e=this.state.match,o=this.props,r=o.children,n=o.component,i=o.render,a=this.context.router,c=a.history,p=a.route,s=a.staticContext,u={match:e,location:this.props.location||p.location,history:c,staticContext:s};if(n)return e?t.createComponentVNode(2,n,u):null;if(i)return e?i(u,this.context):null;if("function"===typeof r)return r(u);return r},o}(t.Component);function H(t,e,o){var r=t.path,n=t.exact,i=t.strict,a=t.sensitive,c=t.from,p=r||c;return p?V(o.pathname,{path:p,exact:n,strict:i,sensitive:a}):e.match}function B(t,e,o){var r,n;if(c(t))for(var i=0;i<t.length;++i){if(n=t[i],c(n)){var a=B(n,e,o);r=a.match,n=a._child}else r=H(n.props,e,o);if(r)break}else r=H(t.props,e,o),n=t;return{match:r,_child:n}}var W=function(e){function o(){e.apply(this,arguments)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.render=function(){var e=this.context.router.route,o=this.props.children,r=this.props.location||e.location;if(p(o))return null;var n=B(o,e,r),i=n.match,a=n._child;if(i)return t.createComponentVNode(a.flags,a.type,u(a.props,{location:r,computedMatch:i}));return null},o}(t.Component);function E(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(o[r]=t[r]);return o}var A=function(t){return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)};function L(t,e){var o=t.props,r=t.context;if(o.onClick&&o.onClick(e),!e.defaultPrevented&&0===e.button&&!o.target&&!A(e)){e.preventDefault();var n=r.router.history,i=o.replace;void 0===i&&(i=!1);var a=o.to;i?n.replace(a):n.push(a)}}function Y(o,r){o.replace;var n=o.children,i=o.className,a=o.to;void 0===a&&(a="");var c=o.innerRef,p=E(o,["replace","children","className","to","innerRef"]);l(r.router,"You should not use <Link> outside a <Router>");var h=r.router.history.createHref(s(a)?e.parsePath(a):a),f=u(p,null);return f.href=h,f.onClick=t.linkEvent({context:r,props:o},L),t.createVNode(1,"a",i,n,0,f,null,c)}function q(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(o[r]=t[r]);return o}function K(t){return t}function U(e){var o=e.to,r=e.exact,n=e.strict,i=e.onClick,a=e.location,c=e.activeClassName;void 0===c&&(c="active");var p=e.className,s=e.activeStyle,h=e.style,l=e.isActive,f=e.ariaCurrent;void 0===f&&(f="true");var y=q(e,["to","exact","strict","onClick","location","activeClassName","className","activeStyle","style","isActive","ariaCurrent"]);return t.createComponentVNode(4,S,{children:function(e){var r=e.location,n=e.match,a=Boolean(l?l(n,r):n);return t.createComponentVNode(8,Y,u({"aria-current":a&&f,className:a?[p,c].filter(K).join(" "):p,onClick:i,style:a?u(h,s):h,to:o},y))},exact:r,location:a,path:"object"===typeof o?o.pathname:o,strict:n})}var D=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enable=function(t){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(t)},e.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},e.prototype.componentWillMount=function(){l(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},e.prototype.componentWillReceiveProps=function(t){t.when?this.props.when&&this.props.message===t.message||this.enable(t.message):this.disable()},e.prototype.componentWillUnmount=function(){this.disable()},e.prototype.render=function(){return null},e}(t.Component);function F(t){return s(t)||(t=h(t)),e.parsePath(t)}var I=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},e.prototype.componentWillMount=function(){l(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},e.prototype.componentDidMount=function(){this.isStatic()||this.perform()},e.prototype.componentDidUpdate=function(t){var e=F(t.to),o=F(this.props.to);if(e.pathname===o.pathname&&e.search===o.search)return void console.error("You tried to redirect to the same route you're currently on: \""+o.pathname+o.search+'"');this.perform()},e.prototype.perform=function(){var t=this.context.router.history,e=this.props,o=e.push;void 0===o&&(o=!1);var r=e.to;o?t.push(r):t.replace(r)},e.prototype.render=function(){return null},e}(t.Component);function T(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(o[r]=t[r]);return o}function z(e){var o=function(o){var r=o.wrappedComponentRef,n=T(o,["wrappedComponentRef"]);return t.createComponentVNode(4,S,{render:function(o){return t.createComponentVNode(2,e,u(n,o),null,r)}})};return o.displayName="withRouter("+(e.displayName||e.name)+")",o.WrappedComponent=e,a.default(o,e)}exports.BrowserRouter=O,exports.HashRouter=P,exports.Link=Y,exports.MemoryRouter=R,exports.NavLink=U,exports.Prompt=D,exports.Redirect=I,exports.Route=S,exports.Router=f,exports.StaticRouter=v,exports.Switch=W,exports.matchPath=V,exports.withRouter=z;
